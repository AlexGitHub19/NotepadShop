<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    @Styles.Render("~/Content/css")

    <link type="text/css" rel="stylesheet" href="~/Content/materialize/css/materialize.css" />

    @Scripts.Render("~/bundles/jquery")
    <script type="text/javascript" src="~/Scripts/materialize/materialize.js"></script>
    <script type="text/javascript" src="~/Scripts/knockout-3.4.2.js"></script>

    <link type="text/css" rel="stylesheet" href="~/Content/Layout.css" />
    @* <link type="text/css" rel="stylesheet" href="~/Content/materialize/css/materialize.css" />

        @Scripts.Render("~/bundles/jquery")
        <script type="text/javascript" src="~/Scripts/materialize/materialize.js"></script>
        @Scripts.Render("~/bundles/bootstrap")
        @RenderSection("scripts", required: false)
        @Scripts.Render("~/bundles/modernizr")
        <script type="text/javascript" src="~/Scripts/knockout-3.4.2.js"></script>*@
</head>
<body>
    <div class="tokenContainer">
        @Html.AntiForgeryToken()
    </div>
    <div id="userInfoContainer">
        <div id="userLoginContainer" data-bind="if: isLoggedIn">
            <p data-bind="text: email"></p>
        </div>
        <div data-bind="ifnot: isLoggedIn">
            <span id="logInBtn" data-target="loginModal">Log In or register</span>
            @*<a class="waves-effect waves-light btn modal-trigger" data-target="loginModal">Modal</a>*@
        </div>
    </div>
    <div id="userInfoPopUp">
        <p id="logOutBtn">log out</p>
    </div>

    <!-- Modal Structure -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <ul class="tabs">
                <li class="tab col s6"><a class="blue-text" href="#modalLogInContainer">Log In</a></li>
                <li class="tab col s6"><a class="blue-text" href="#modalRegisterContainer">Register</a></li>
            </ul>
            <div id="modalLogInContainer" class="col s12">
                <div class="input-field col s6">
                    <input id="loginEmailInput" type="text" class="validate" data-bind="textInput: loginEmail">
                    <label for="loginEmailInput">Email</label>
                </div>
                <div class="input-field col s12">
                    <input id="loginPasswordInput" type="password" class="validate" data-bind="textInput: loginPasword">
                    <label for="loginPasswordInput">Password</label>
                </div>
                <div class="authorixztionFailedMessageContainer" data-bind="visible: showLoginFailedMessage">
                    <p class="red-text" data-bind="text: loginFailedMessage"></p>
                </div>
                <div class="center-container">
                    <button id="sumbitLogInBtn" class="btn btn-small btn-submit  btn-blue" data-bind="visible: !displayLogInPreloader(), enable: submitLoginBtnEnabled">Log in</button>
                    <div id="logInPreloader" class="small-preloader-holder" data-bind="visible: displayLogInPreloader">
                        <div class="preloader-wrapper small active">
                            <div class="spinner-layer spinner-blue-only">
                                <div class="circle-clipper left">
                                    <div class="circle"></div>
                                </div><div class="gap-patch">
                                    <div class="circle"></div>
                                </div><div class="circle-clipper right">
                                    <div class="circle"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="modalRegisterContainer" class="col s12">
                <div class="input-field col s6">
                    <input id="registerEmailInput" type="email" class="validate" data-bind="textInput: registerEmail">
                    <label for="registerEmailInput">Email</label>
                    <span class="email-validation-msg red-text">email should contain symbol @@</span>
                </div>
                <div class="input-field col s12">
                    <input id="registerPasswordInput" type="password" data-bind="textInput: registerPasword" class="validate" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$">
                    <label for="registerPasswordInput">Password</label>
                    <span class="password-validation-msg red-text">pasword should contains at least 8 characters, should contains at least one digit and one uppercase  letter</span>
                </div>
                <div class="authorixztionFailedMessageContainer" data-bind="visible: showRegisterFailedMessage">
                    <p class="red-text" data-bind="text: registerFailedMessage"></p>
                </div>
                <div class="center-container">
                    <a id="sumbitRegisterBtn" class="btn btn-small btn-submit btn-blue" data-bind="visible: !displayRegisterPreloader()">Register</a>
                    <div id="registrationPreloader" class="small-preloader-holder" data-bind="visible: displayRegisterPreloader">
                        <div class="preloader-wrapper small active">
                            <div class="spinner-layer spinner-blue-only">
                                <div class="circle-clipper left">
                                    <div class="circle"></div>
                                </div><div class="gap-patch">
                                    <div class="circle"></div>
                                </div><div class="circle-clipper right">
                                    <div class="circle"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container body-content">
        @RenderBody()
        <hr />
        <footer>
            <p>&copy; @DateTime.Now.Year - My ASP.NET Application</p>
        </footer>
    </div>
</body>
</html>

<script type="text/javascript" src="~/Scripts/Shared/Layout.js"></script>
<script type="text/javascript">
    var email = "@ViewBag.Email";
    var registerUrl = "@Url.Action("Register", "Account")";
    var logInUrl = "@Url.Action("Login", "Account")";
    var logOutUrl = "@Url.Action("Logout", "Account")";
</script>
